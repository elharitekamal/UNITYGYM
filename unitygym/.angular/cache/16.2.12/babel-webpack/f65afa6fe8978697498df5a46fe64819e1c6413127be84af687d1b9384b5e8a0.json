{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/postservice.service\";\nimport * as i2 from \"../services/mediaservice.service\";\nexport class AddpostComponent {\n  constructor(postService, mediaService) {\n    this.postService = postService;\n    this.mediaService = mediaService;\n  }\n  onSubmit() {\n    const title = document.getElementById('title').value;\n    const content = document.getElementById('content').value;\n    const imageInput = document.getElementById('fileInput');\n    const imageUrl = imageInput.files?.length ? imageInput.files[0].name : '';\n    const newPost = {\n      title,\n      content\n    };\n    this.postService.addPost(newPost).subscribe(postResponse => {\n      const postId = postResponse.id;\n      const media = {\n        url: imageUrl,\n        postId: postId\n      };\n      this.mediaService.addMedia(media).subscribe(mediaResponse => {\n        console.log('Media added successfully:', mediaResponse);\n      }, mediaError => {\n        console.error('Error adding media:', mediaError);\n      });\n    }, postError => {\n      console.error('Error adding post:', postError);\n    });\n  }\n  onFileSelected(event) {\n    const inputElement = event.target;\n    const files = inputElement.files;\n    if (files && files.length > 0) {\n      const selectedFile = files.item(0);\n      console.log('Selected file:', selectedFile);\n      // Vous pouvez effectuer ici toute logique supplémentaire liée au fichier sélectionné\n    }\n  }\n  static #_ = this.ɵfac = function AddpostComponent_Factory(t) {\n    return new (t || AddpostComponent)(i0.ɵɵdirectiveInject(i1.PostserviceService), i0.ɵɵdirectiveInject(i2.MediaserviceService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddpostComponent,\n    selectors: [[\"app-addpost\"]],\n    decls: 35,\n    vars: 0,\n    consts: [[\"data-v0-t\", \"card\", 1, \"border\", \"text-card-foreground\", \"w-full\", \"max-w-md\", \"mx-auto\", \"bg-white\", \"p-6\", \"rounded-lg\", \"shadow-md\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\", \"p-6\"], [1, \"text-2xl\", \"font-semibold\", \"whitespace-nowrap\", \"leading-none\", \"tracking-tight\"], [1, \"p-6\"], [3, \"submit\"], [1, \"grid\", \"w-full\", \"gap-4\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\"], [\"for\", \"title\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [\"id\", \"title\", \"placeholder\", \"Title of your post\", 1, \"flex\", \"h-10\", \"w-full\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-3\", \"py-2\", \"text-sm\", \"ring-offset-background\", \"placeholder:text-muted-foreground\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:cursor-not-allowed\", \"disabled:opacity-50\"], [\"titleInput\", \"\"], [\"for\", \"content\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [\"id\", \"content\", \"placeholder\", \"Content of your post\", 1, \"flex\", \"min-h-[80px]\", \"w-full\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-3\", \"py-2\", \"text-sm\", \"ring-offset-background\", \"placeholder:text-muted-foreground\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:cursor-not-allowed\", \"disabled:opacity-50\"], [\"contentInput\", \"\"], [\"for\", \"image\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"w-full\", \"h-32\", \"border-2\", \"border-dashed\", \"rounded-lg\", \"p-4\", \"text-center\"], [\"for\", \"fileInput\", 1, \"cursor-pointer\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"w-6\", \"h-6\", \"text-gray-400\"], [\"d\", \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"], [\"d\", \"M12 12v9\"], [\"d\", \"m16 16-4-4-4 4\"], [1, \"mt-1\", \"text-sm\", \"text-gray-400\"], [1, \"text-blue-600\", \"cursor-pointer\"], [\"type\", \"file\", \"id\", \"fileInput\", \"accept\", \".jpg, .png\", 1, \"hidden\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"items-center\", \"p-6\", \"flex\", \"justify-end\"], [\"type\", \"submit\", 1, \"inline-flex\", \"items-center\", \"justify-center\", \"whitespace-nowrap\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"bg-primary\", \"text-primary-foreground\", \"hover:bg-primary/90\", \"h-10\", \"px-4\", \"py-2\"]],\n    template: function AddpostComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n        i0.ɵɵtext(3, \"Add Post\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"form\", 4);\n        i0.ɵɵlistener(\"submit\", function AddpostComponent_Template_form_submit_5_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7);\n        i0.ɵɵtext(9, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 8, 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 10);\n        i0.ɵɵtext(14, \"Content\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"textarea\", 11, 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 14)(21, \"label\", 15);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(22, \"svg\", 16);\n        i0.ɵɵelement(23, \"path\", 17)(24, \"path\", 18)(25, \"path\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(26, \"p\", 20);\n        i0.ɵɵtext(27, \"Attach your image here or \");\n        i0.ɵɵelementStart(28, \"span\", 21);\n        i0.ɵɵtext(29, \"Browse files\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"input\", 22, 23);\n        i0.ɵɵlistener(\"change\", function AddpostComponent_Template_input_change_30_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(32, \"div\", 24)(33, \"button\", 25);\n        i0.ɵɵtext(34, \"Create\");\n        i0.ɵɵelementEnd()()()()();\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGRwb3N0LmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRkcG9zdC9hZGRwb3N0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9LQUFvSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["AddpostComponent","constructor","postService","mediaService","onSubmit","title","document","getElementById","value","content","imageInput","imageUrl","files","length","name","newPost","addPost","subscribe","postResponse","postId","id","media","url","addMedia","mediaResponse","console","log","mediaError","error","postError","onFileSelected","event","inputElement","target","selectedFile","item","_","i0","ɵɵdirectiveInject","i1","PostserviceService","i2","MediaserviceService","_2","selectors","decls","vars","consts","template","AddpostComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AddpostComponent_Template_form_submit_5_listener","ɵɵelement","ɵɵnamespaceSVG","ɵɵnamespaceHTML","AddpostComponent_Template_input_change_30_listener","$event"],"sources":["C:\\Users\\YC\\Desktop\\unitygym\\src\\app\\addpost\\addpost.component.ts","C:\\Users\\YC\\Desktop\\unitygym\\src\\app\\addpost\\addpost.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Post } from '../models/post';\nimport { PostserviceService } from '../services/postservice.service';\nimport { MediaserviceService } from '../services/mediaservice.service';\nimport { Media } from '../models/media';\n\n@Component({\n  selector: 'app-addpost',\n  templateUrl: './addpost.component.html',\n  styleUrls: ['./addpost.component.css']\n})\nexport class AddpostComponent {\n\n \n  constructor(private postService: PostserviceService, private mediaService: MediaserviceService) { }\n\n  onSubmit() {\n    const title = (document.getElementById('title') as HTMLInputElement).value;\n    const content = (document.getElementById('content') as HTMLTextAreaElement).value;\n    const imageInput = (document.getElementById('fileInput') as HTMLInputElement);\n    const imageUrl = imageInput.files?.length ? imageInput.files[0].name : '';\n\n    const newPost: Post = { title, content };\n    this.postService.addPost(newPost).subscribe(\n      (postResponse) => {\n        const postId = postResponse.id;\n        const media: Media = { url: imageUrl, postId: postId };\n        this.mediaService.addMedia(media).subscribe(\n          (mediaResponse) => {\n            console.log('Media added successfully:', mediaResponse);\n          },\n          (mediaError) => {\n            console.error('Error adding media:', mediaError);\n          }\n        );\n      },\n      (postError) => {\n        console.error('Error adding post:', postError);\n      }\n    ); }\n\n  onFileSelected(event: Event) {\n  const inputElement = event.target as HTMLInputElement;\n  const files = inputElement.files;\n  if (files && files.length > 0) {\n    const selectedFile = files.item(0);\n    console.log('Selected file:', selectedFile);\n    // Vous pouvez effectuer ici toute logique supplémentaire liée au fichier sélectionné\n  }\n  }\n}","<div class=\"border text-card-foreground w-full max-w-md mx-auto bg-white p-6 rounded-lg shadow-md\" data-v0-t=\"card\">\n  <div class=\"flex flex-col space-y-1.5 p-6\">\n    <h3 class=\"text-2xl font-semibold whitespace-nowrap leading-none tracking-tight\">Add Post</h3>\n  </div>\n  <div class=\"p-6\">\n    <form (submit)=\"onSubmit()\">\n      <div class=\"grid w-full gap-4\">\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"title\">Title</label>\n          <input #titleInput class=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\" id=\"title\" placeholder=\"Title of your post\">\n        </div>\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"content\">Content</label>\n          <textarea #contentInput class=\"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\" id=\"content\" placeholder=\"Content of your post\"></textarea>\n        </div>\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"image\">Image</label>\n          <div class=\"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg p-4 text-center\">\n            <label for=\"fileInput\" class=\"cursor-pointer\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-400\">\n                <path d=\"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"></path>\n                <path d=\"M12 12v9\"></path>\n                <path d=\"m16 16-4-4-4 4\"></path>\n              </svg>\n              <p class=\"mt-1 text-sm text-gray-400\">Attach your image here or <span class=\"text-blue-600 cursor-pointer\">Browse files</span></p>\n            </label>\n            <input #fileInput type=\"file\" id=\"fileInput\" class=\"hidden\" accept=\".jpg, .png\" (change)=\"onFileSelected($event)\">\n          </div>\n        </div>\n      </div>\n      <div class=\"items-center p-6 flex justify-end\">\n        <button type=\"submit\" class=\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">Create</button>\n      </div>\n    </form>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}