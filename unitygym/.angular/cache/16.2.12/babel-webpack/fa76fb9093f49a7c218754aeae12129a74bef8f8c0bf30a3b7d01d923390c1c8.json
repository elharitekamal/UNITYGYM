{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/postservice.service\";\nimport * as i2 from \"../services/mediaservice.service\";\nexport class AddpostComponent {\n  constructor(postService, mediaService) {\n    this.postService = postService;\n    this.mediaService = mediaService;\n  }\n  onSubmit(title, content, imageFile) {\n    // Créer le post\n    const newPost = {\n      title,\n      content\n    };\n    this.postService.addPost(newPost).subscribe(postResponse => {\n      const postId = postResponse.id;\n      // Une fois que le post est créé avec succès, créer le média\n      if (imageFile) {\n        const formData = new FormData();\n        formData.append('file', imageFile);\n        const media = {\n          url: '',\n          postId: postId // Assign the appropriate value here\n        };\n\n        this.mediaService.addMedia(media).subscribe(mediaResponse => {\n          console.log('Media added successfully:', mediaResponse);\n          // Maintenant que le média est ajouté, vous pouvez faire tout ce que vous voulez\n        }, mediaError => {\n          console.error('Error adding media:', mediaError);\n        });\n      }\n    }, postError => {\n      console.error('Error adding post:', postError);\n    });\n  }\n  onFileSelected(event) {\n    const files = event.target.files;\n    if (files.length > 0) {\n      const imageFile = files[0];\n      console.log('Selected file:', imageFile);\n      // Vous pouvez également prévisualiser l'image ici si vous le souhaitez\n    }\n  }\n  static #_ = this.ɵfac = function AddpostComponent_Factory(t) {\n    return new (t || AddpostComponent)(i0.ɵɵdirectiveInject(i1.PostserviceService), i0.ɵɵdirectiveInject(i2.MediaserviceService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddpostComponent,\n    selectors: [[\"app-addpost\"]],\n    decls: 35,\n    vars: 0,\n    consts: [[\"data-v0-t\", \"card\", 1, \"border\", \"text-card-foreground\", \"w-full\", \"max-w-md\", \"mx-auto\", \"bg-white\", \"p-6\", \"rounded-lg\", \"shadow-md\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\", \"p-6\"], [1, \"text-2xl\", \"font-semibold\", \"whitespace-nowrap\", \"leading-none\", \"tracking-tight\"], [1, \"p-6\"], [3, \"submit\"], [1, \"grid\", \"w-full\", \"gap-4\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\"], [\"for\", \"title\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [\"id\", \"title\", \"placeholder\", \"Title of your post\", 1, \"flex\", \"h-10\", \"w-full\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-3\", \"py-2\", \"text-sm\", \"ring-offset-background\", \"placeholder:text-muted-foreground\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:cursor-not-allowed\", \"disabled:opacity-50\"], [\"titleInput\", \"\"], [\"for\", \"content\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [\"id\", \"content\", \"placeholder\", \"Content of your post\", 1, \"flex\", \"min-h-[80px]\", \"w-full\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-3\", \"py-2\", \"text-sm\", \"ring-offset-background\", \"placeholder:text-muted-foreground\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:cursor-not-allowed\", \"disabled:opacity-50\"], [\"contentInput\", \"\"], [\"for\", \"image\", 1, \"text-sm\", \"font-medium\", \"leading-none\", \"peer-disabled:cursor-not-allowed\", \"peer-disabled:opacity-70\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"w-full\", \"h-32\", \"border-2\", \"border-dashed\", \"rounded-lg\", \"p-4\", \"text-center\"], [\"for\", \"fileInput\", 1, \"cursor-pointer\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"w-6\", \"h-6\", \"text-gray-400\"], [\"d\", \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"], [\"d\", \"M12 12v9\"], [\"d\", \"m16 16-4-4-4 4\"], [1, \"mt-1\", \"text-sm\", \"text-gray-400\"], [1, \"text-blue-600\", \"cursor-pointer\"], [\"type\", \"file\", \"id\", \"fileInput\", \"accept\", \".jpg, .png\", 1, \"hidden\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"items-center\", \"p-6\", \"flex\", \"justify-end\"], [\"type\", \"submit\", 1, \"inline-flex\", \"items-center\", \"justify-center\", \"whitespace-nowrap\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"bg-primary\", \"text-primary-foreground\", \"hover:bg-primary/90\", \"h-10\", \"px-4\", \"py-2\"]],\n    template: function AddpostComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n        i0.ɵɵtext(3, \"Add Post\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"form\", 4);\n        i0.ɵɵlistener(\"submit\", function AddpostComponent_Template_form_submit_5_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7);\n        i0.ɵɵtext(9, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 8, 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 10);\n        i0.ɵɵtext(14, \"Content\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"textarea\", 11, 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 14)(21, \"label\", 15);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(22, \"svg\", 16);\n        i0.ɵɵelement(23, \"path\", 17)(24, \"path\", 18)(25, \"path\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(26, \"p\", 20);\n        i0.ɵɵtext(27, \"Attach your image here or \");\n        i0.ɵɵelementStart(28, \"span\", 21);\n        i0.ɵɵtext(29, \"Browse files\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"input\", 22, 23);\n        i0.ɵɵlistener(\"change\", function AddpostComponent_Template_input_change_30_listener($event) {\n          return ctx.onFileSelected($event.target.files);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(32, \"div\", 24)(33, \"button\", 25);\n        i0.ɵɵtext(34, \"Create\");\n        i0.ɵɵelementEnd()()()()();\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGRwb3N0LmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRkcG9zdC9hZGRwb3N0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9LQUFvSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["AddpostComponent","constructor","postService","mediaService","onSubmit","title","content","imageFile","newPost","addPost","subscribe","postResponse","postId","id","formData","FormData","append","media","url","addMedia","mediaResponse","console","log","mediaError","error","postError","onFileSelected","event","files","target","length","_","i0","ɵɵdirectiveInject","i1","PostserviceService","i2","MediaserviceService","_2","selectors","decls","vars","consts","template","AddpostComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AddpostComponent_Template_form_submit_5_listener","ɵɵelement","ɵɵnamespaceSVG","ɵɵnamespaceHTML","AddpostComponent_Template_input_change_30_listener","$event"],"sources":["C:\\Users\\YC\\Desktop\\unitygym\\src\\app\\addpost\\addpost.component.ts","C:\\Users\\YC\\Desktop\\unitygym\\src\\app\\addpost\\addpost.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Post } from '../models/post';\nimport { PostserviceService } from '../services/postservice.service';\nimport { MediaserviceService } from '../services/mediaservice.service';\nimport { Media } from '../models/media';\n\n@Component({\n  selector: 'app-addpost',\n  templateUrl: './addpost.component.html',\n  styleUrls: ['./addpost.component.css']\n})\nexport class AddpostComponent {\n\n \n  constructor(private postService: PostserviceService, private mediaService: MediaserviceService) { }\n\n  onSubmit(title: string, content: string, imageFile: File) {\n    // Créer le post\n    const newPost: Post = { title, content };\n    this.postService.addPost(newPost).subscribe(\n      (postResponse) => {\n        const postId = postResponse.id;\n        // Une fois que le post est créé avec succès, créer le média\n        if (imageFile) {\n          const formData: FormData = new FormData();\n          formData.append('file', imageFile);\n\n          const media: Media = {\n            url: '', // Assign the appropriate value here\n            postId: postId // Assign the appropriate value here\n          };\n\n          this.mediaService.addMedia(media).subscribe(\n            (mediaResponse) => {\n              console.log('Media added successfully:', mediaResponse);\n              // Maintenant que le média est ajouté, vous pouvez faire tout ce que vous voulez\n            },\n            (mediaError) => {\n              console.error('Error adding media:', mediaError);\n            }\n          );\n        }\n      },\n      (postError) => {\n        console.error('Error adding post:', postError);\n      }\n    );\n  }\n\n  onFileSelected(event: any) {\n    const files = event.target.files;\n    if (files.length > 0) {\n      const imageFile = files[0];\n      console.log('Selected file:', imageFile);\n      // Vous pouvez également prévisualiser l'image ici si vous le souhaitez\n    }\n  }\n}\n","<div class=\"border text-card-foreground w-full max-w-md mx-auto bg-white p-6 rounded-lg shadow-md\" data-v0-t=\"card\">\n  <div class=\"flex flex-col space-y-1.5 p-6\">\n    <h3 class=\"text-2xl font-semibold whitespace-nowrap leading-none tracking-tight\">Add Post</h3>\n  </div>\n  <div class=\"p-6\">\n    <form (submit)=\"onSubmit()\">\n      <div class=\"grid w-full gap-4\">\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"title\">Title</label>\n          <input #titleInput class=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\" id=\"title\" placeholder=\"Title of your post\">\n        </div>\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"content\">Content</label>\n          <textarea #contentInput class=\"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\" id=\"content\" placeholder=\"Content of your post\"></textarea>\n        </div>\n        <div class=\"flex flex-col space-y-1.5\">\n          <label class=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" for=\"image\">Image</label>\n          <div class=\"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg p-4 text-center\">\n            <label for=\"fileInput\" class=\"cursor-pointer\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-400\">\n                <path d=\"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"></path>\n                <path d=\"M12 12v9\"></path>\n                <path d=\"m16 16-4-4-4 4\"></path>\n              </svg>\n              <p class=\"mt-1 text-sm text-gray-400\">Attach your image here or <span class=\"text-blue-600 cursor-pointer\">Browse files</span></p>\n            </label>\n            <input #fileInput type=\"file\" id=\"fileInput\" class=\"hidden\" accept=\".jpg, .png\" (change)=\"onFileSelected($event.target.files)\">\n          </div>\n        </div>\n      </div>\n      <div class=\"items-center p-6 flex justify-end\">\n        <button type=\"submit\" class=\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">Create</button>\n      </div>\n    </form>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}