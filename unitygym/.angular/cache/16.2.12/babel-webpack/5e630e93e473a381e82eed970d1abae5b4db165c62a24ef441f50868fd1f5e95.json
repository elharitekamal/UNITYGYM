{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let AddpostComponent = class AddpostComponent {\n  constructor(postService, mediaService, router, cloudinaryService) {\n    this.postService = postService;\n    this.mediaService = mediaService;\n    this.router = router;\n    this.cloudinaryService = cloudinaryService;\n    this.titre = '';\n    this.content = '';\n    this.imageUrl = '';\n  }\n  onSubmit() {\n    const newPost = {\n      titre: this.titre,\n      contenu: this.content\n    };\n    this.postService.addPost(newPost).subscribe(postResponse => {\n      const postId = postResponse.id;\n      const media = {\n        url: this.imageUrl,\n        postId: postId\n      };\n      this.mediaService.addMedia(media).subscribe(mediaResponse => {\n        console.log('Media added successfully:', mediaResponse);\n        this.router.navigateByUrl('/post');\n      }, mediaError => {\n        console.error('Error adding media:', mediaError);\n      });\n    }, postError => {\n      console.error('Error adding post:', postError);\n    });\n  }\n  onFileSelected(event) {\n    const inputElement = event.target;\n    const files = inputElement.files;\n    if (files && files.length > 0) {\n      const selectedFile = files.item(0);\n      console.log('Selected file:', selectedFile);\n    }\n  }\n};\nAddpostComponent = __decorate([Component({\n  selector: 'app-addpost',\n  templateUrl: './addpost.component.html',\n  styleUrls: ['./addpost.component.css']\n})], AddpostComponent);","map":{"version":3,"names":["Component","AddpostComponent","constructor","postService","mediaService","router","cloudinaryService","titre","content","imageUrl","onSubmit","newPost","contenu","addPost","subscribe","postResponse","postId","id","media","url","addMedia","mediaResponse","console","log","navigateByUrl","mediaError","error","postError","onFileSelected","event","inputElement","target","files","length","selectedFile","item","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\YC\\Desktop\\unitygym\\src\\app\\addpost\\addpost.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Post } from '../models/post';\nimport { PostserviceService } from '../services/postservice.service';\nimport { MediaserviceService } from '../services/mediaservice.service';\nimport { Media } from '../models/media';\nimport { Router } from '@angular/router';\nimport { Cloudinary } from '@cloudinary/angular-5.x';\nimport { CloudinaryService } from '../services/cloudinary.service';\n\n@Component({\n  selector: 'app-addpost',\n  templateUrl: './addpost.component.html',\n  styleUrls: ['./addpost.component.css']\n})\nexport class AddpostComponent {\n\ntitre: string = '';\n  content: string = '';\n  imageUrl: string = '';\n \n  constructor(private postService: PostserviceService, private mediaService: MediaserviceService, private router: Router, private cloudinaryService: CloudinaryService) { }\n\n  \nonSubmit() {\n    const newPost: Post = { titre: this.titre, contenu: this.content };\n    this.postService.addPost(newPost).subscribe(\n      (postResponse) => {\n        const postId = postResponse.id;\n        const media: Media = { url: this.imageUrl, postId: postId };\n        this.mediaService.addMedia(media).subscribe(\n          (mediaResponse) => {\n            console.log('Media added successfully:', mediaResponse);\n            this.router.navigateByUrl('/post');\n          },\n          (mediaError) => {\n            console.error('Error adding media:', mediaError);\n          }\n        );\n      },\n      (postError) => {\n        console.error('Error adding post:', postError);\n      }\n    );\n  }\n\n  onFileSelected(event: Event) {\n  const inputElement = event.target as HTMLInputElement;\n  const files = inputElement.files;\n  if (files && files.length > 0) {\n    const selectedFile = files.item(0);\n    console.log('Selected file:', selectedFile);\n  }\n}\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAclC,WAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAM3BC,YAAoBC,WAA+B,EAAUC,YAAiC,EAAUC,MAAc,EAAUC,iBAAoC;IAAhJ,KAAAH,WAAW,GAAXA,WAAW;IAA8B,KAAAC,YAAY,GAAZA,YAAY;IAA+B,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,iBAAiB,GAAjBA,iBAAiB;IAJnJ,KAAAC,KAAK,GAAW,EAAE;IAChB,KAAAC,OAAO,GAAW,EAAE;IACpB,KAAAC,QAAQ,GAAW,EAAE;EAEmJ;EAG1KC,QAAQA,CAAA;IACJ,MAAMC,OAAO,GAAS;MAAEJ,KAAK,EAAE,IAAI,CAACA,KAAK;MAAEK,OAAO,EAAE,IAAI,CAACJ;IAAO,CAAE;IAClE,IAAI,CAACL,WAAW,CAACU,OAAO,CAACF,OAAO,CAAC,CAACG,SAAS,CACxCC,YAAY,IAAI;MACf,MAAMC,MAAM,GAAGD,YAAY,CAACE,EAAE;MAC9B,MAAMC,KAAK,GAAU;QAAEC,GAAG,EAAE,IAAI,CAACV,QAAQ;QAAEO,MAAM,EAAEA;MAAM,CAAE;MAC3D,IAAI,CAACZ,YAAY,CAACgB,QAAQ,CAACF,KAAK,CAAC,CAACJ,SAAS,CACxCO,aAAa,IAAI;QAChBC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEF,aAAa,CAAC;QACvD,IAAI,CAAChB,MAAM,CAACmB,aAAa,CAAC,OAAO,CAAC;MACpC,CAAC,EACAC,UAAU,IAAI;QACbH,OAAO,CAACI,KAAK,CAAC,qBAAqB,EAAED,UAAU,CAAC;MAClD,CAAC,CACF;IACH,CAAC,EACAE,SAAS,IAAI;MACZL,OAAO,CAACI,KAAK,CAAC,oBAAoB,EAAEC,SAAS,CAAC;IAChD,CAAC,CACF;EACH;EAEAC,cAAcA,CAACC,KAAY;IAC3B,MAAMC,YAAY,GAAGD,KAAK,CAACE,MAA0B;IACrD,MAAMC,KAAK,GAAGF,YAAY,CAACE,KAAK;IAChC,IAAIA,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;MAC7B,MAAMC,YAAY,GAAGF,KAAK,CAACG,IAAI,CAAC,CAAC,CAAC;MAClCb,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEW,YAAY,CAAC;;EAE/C;CACC;AAvCYjC,gBAAgB,GAAAmC,UAAA,EAL5BpC,SAAS,CAAC;EACTqC,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE,0BAA0B;EACvCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,C,EACWtC,gBAAgB,CAuC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}